<div *ngIf="formGroup" [formGroup]="formGroup">
  <div class="row page-form-row">
    <div class="col-xs-12" style="font-weight: bold;">Merma para {{ afectadoTitle }}</div>
  </div>
  <div class="row page-form-row" [formGroupName]="groupName">
    <div class="col-12 col-md-6 mb-1 d-flex align-items-center">
      <label class="form-label mr-2">Valor</label>
      <app-number-field
        controlName="merma_{{ afectado }}_valor"
        [groupName]="groupName"
        [form]="formGroup"
        class="app-input-field"
      ></app-number-field>
    </div>
    <div class="col-12 col-md-6 mb-1 d-flex align-items-center">
      <label class="form-label mr-2">Moneda</label>
      <app-moneda-field
      class="app-input-field"
        controlName="merma_{{ afectado }}_moneda_id"
        [groupName]="groupName"
        [form]="formGroup"
        (valueChange)="
          group
            .get('merma_' + afectado + '_moneda_simbolo')
            ?.setValue($event?.simbolo)
        "
      ></app-moneda-field>
    </div>
    <div class="col-12 col-md-6 mb-1 d-flex align-items-center">
      <label class="form-label mr-2">Unidad</label>
      <app-unidad-field
      class="app-input-field"
        controlName="merma_{{ afectado }}_unidad_id"
        [groupName]="groupName"
        [form]="formGroup"
        (valueChange)="
          group
            .get('merma_' + afectado + '_unidad_abreviatura')
            ?.setValue($event?.abreviatura)
        "
      ></app-unidad-field>
    </div>
    <div class="col-xs-12 col-sm-6 col-md-4 toggle">
      <ng-container *ngIf="isShow; else esPorcentualTemplate">
        {{ esPorcentual ? "Porcentual" : "No Porcentual" }}
      </ng-container>
      <ng-template #esPorcentualTemplate>
        <mat-slide-toggle formControlName="merma_{{ afectado }}_es_porcentual">
          {{ esPorcentual ? "Porcentual" : "No Porcentual" }}
        </mat-slide-toggle>
      </ng-template>
    </div>
    <div class="col-12 col-md-6 mb-1 d-flex align-items-center">
      <label class="form-label mr-2">Tolerancia</label>
      <app-number-field
      class="app-input-field"
        controlName="merma_{{ afectado }}_tolerancia"
        [groupName]="groupName"
        [form]="formGroup"
      ></app-number-field>
    </div>
  </div>
</div>
