<app-page-form
  class="punto-venta-page"
  module="{{ isEdit ? 'EDITAR' : isShow ? 'VER' : 'NUEVO' }}"
  submodule="Proveedor > Punto de Venta"
  [class.page-form-show]="isShow"
  [formGroup]="form"
  [hasChange]="hasChange"
  [isShow]="isShow"
  [modelo]="modelo"
  (backClick)="back($event)"
  (editClick)="redirectToEdit()"
  (submitEvent)="submit(false)"
>
<div class="page-container" (keydown.enter)="onEnter($event)"><!-- Colocar siempre el onEnter -->
  <div class="section" formGroupName="info">
    <h2>INFORMACIÓN PRINCIPAL</h2>
    <!--app-page-form-entities-info
      [pdv]="true"
      [labelNombre]="'Establecimiento (Razon Social)'"
      [labelNombreCorto]="'Nombre del Establecimiento'"
      [form]="form"
      [isEdit]="isEdit"
      [isShow]="isShow"
      [logo]="logo"
      [user]="user"
      [modelo]="modelo"
      [showComposicionJuridica]="false"
    ></app-page-form-entities-info-->
    <div [formGroup]="form" >

      <div formGroupName="info" class="row" style="margin: 0;">

        <div class="col-xs-12 col-md-10">

            <div class="row">

              <!-- pdv -->
              <div class="input-form-full col-xs-12 col-sm-6 col-md-4">
                <mat-label class="custom-label">
                  <span class="required">(*) </span>
                  Proveedor (Razon Social)
                </mat-label>
                <mat-form-field floatLabel="always" appearance="outline">
                  <input matInput formControlName="proveedor" appAutofocus />
                </mat-form-field>
              </div>

              <!-- Nombre de Fantasía -->
              <div class="input-form-full col-xs-12 col-sm-6 col-md-3">
                <mat-label class="custom-label">
                  <span class="required">(*) </span>
                  Nombre del Establecimiento
                </mat-label>
                <mat-form-field floatLabel="always" appearance="outline" subscriptSizing="dynamic">
                  <input matInput formControlName="nombre_corto" />
                  <mat-error *ngIf="info.controls['nombre_corto'].hasError('required')">
                    El Nombre del Establecimiento es <strong>requerido</strong>
                  </mat-error>
                </mat-form-field>
              </div>

              <!-- Cliente -->
              <div class="input-form-full col-xs-12 col-sm-6 col-md-4">
                <mat-label class="custom-label">
                  Establecimiento (Razon Social)
                </mat-label>
                <mat-form-field floatLabel="always" appearance="outline">
                  <input matInput formControlName="nombre" appAutofocus />
                  <mat-error *ngIf="info.controls['nombre'].hasError('required')">
                    El nombre es <strong>requerido</strong>
                  </mat-error>
                </mat-form-field>
              </div>

               <!-- numero sucursal -->
              <app-number-field
                class="input-form-full col-xs-12 col-sm-6 col-md-3"
                title="Número Sucursal"
                groupName="info"
                controlName="numero_sucursal"
                [requerido]="true"
                [form]="form"
              ></app-number-field>

              <!-- Estado -->
              <div class="input-form-full col-xs-12 col-sm-6 col-md-2">
                <mat-label class="custom-label">
                  Estado
                </mat-label>
                <mat-slide-toggle formControlName="estado" >
                  {{ estadoControlValue ? "Activo" : "No activo" }}
                </mat-slide-toggle>
              </div>

              <!-- Tipo de Documento -->
              <div class="input-form-full col-xs-12 col-sm-6 col-md-3">
                <mat-label class="custom-label">
                  <span class="required">(*) </span>
                  Tipo de Documento
                </mat-label>
                <mat-form-field appearance="outline">
                  <mat-select formControlName="tipo_documento_id">
                    <ng-container *ngFor="let o of tipoDocumentoList">
                      <mat-option [value]="o.id">{{ o.descripcion }}</mat-option>
                    </ng-container>
                  </mat-select>
                  <mat-error *ngIf="info.controls['tipo_documento_id'].hasError('required')">
                    El tipo de documento es <strong>requerido</strong>
                  </mat-error>
                </mat-form-field>
              </div>

              <!-- N. Doc -->
              <div class="input-form-full col-xs-12 col-sm-6 col-md-3">
                <mat-label class="custom-label">
                  <span class="required">(*) </span>
                  Nro de Documento
                </mat-label>
                <mat-form-field floatLabel="always" appearance="outline">
                  <input matInput formControlName="numero_documento" />
                  <mat-error *ngIf="info.controls['numero_documento'].hasError('required')">
                    El número de documento es <strong>requerido</strong>
                  </mat-error>
                </mat-form-field>
              </div>

              <!-- Página Web -->
              <div class="input-form-full col-xs-12 col-sm-6 col-md-3">
                <mat-label class="custom-label">Web</mat-label>
                <mat-form-field floatLabel="always" appearance="outline">
                  <input matInput formControlName="pagina_web" />
                </mat-form-field>
              </div>

              <!-- Comentario -->
              <div class="input-form-full col-xs-10">
                <mat-label class="custom-label">Comentario</mat-label>
                <mat-form-field floatLabel="always" appearance="outline">
                  <textarea class="entities-form-field"
                    matInput
                    formControlName="info_complementaria"
                    cdkTextareaAutosize
                    #autosize="cdkTextareaAutosize"
                    cdkAutosizeMinRows="1"
                  ></textarea>
                </mat-form-field>
              </div>

            </div>

        </div>

        <!-- Foto alineada a la derecha -->
        <app-file-field
          class="input-form-full col-xs-12 col-md-2"
          title="Logotipo"
          groupName="info"
          controlName="logo"
          [field]="logo"
          [form]="form"
          [isEdit]="isEdit"
          (fileChange)="fileChange($event)"
        ></app-file-field>

      </div>

    </div>
  </div>

  <div class="section" *ngIf="isShowInsumo">
    <h2>MERCADERÍAS</h2>
    <app-punto-venta-by-insumo-proveedor-list
      [hideSubModule]="true"
      [puntoVentaId]="id"
      [isEdit]="isEdit"
      [backUrl]="puntoVentaPrecioBackUrl"
    ></app-punto-venta-by-insumo-proveedor-list>
  </div>

  <div class="section geolocation-section">
    <h2>GEOLOCALIZACIÓN</h2>
    <div class="geolocation-content">
      <app-page-form-geo
        class="page-geo"
        [ciudadSelected]="ciudadSelected"
        [form]="form"
        [isShow]="isShow"
        [isPanelOpen]="true"
      ></app-page-form-geo>
    </div>
  </div>

  <div class="section contactos-section" *ngIf="user?.gestor_carga_id && (modelo | puede: a.MODIFICAR_CONTACTOS)">
    <h2 class="contactos-heading">CONTACTOS</h2>
    <app-page-form-contactos
      [form]="form"
      [isShow]="isShow"
      [contactoList]="contactoList"
    ></app-page-form-contactos>
  </div>
</div>
</app-page-form>
