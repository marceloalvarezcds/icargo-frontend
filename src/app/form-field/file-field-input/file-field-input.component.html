<ng-container *ngIf="form">

  <ng-container *ngIf="groupName">

    <div [formGroup]="form">

      <div [formGroupName]="groupName"
        style="display: flex;flex-direction: column; align-items: flex-start;">

        <mat-label class="custom-label">{{ title }}</mat-label>

        <div class="file-field-container">
          <img
            *ngIf="fieldFile && !field"
            [src]="fieldFile | imageFileBase64 | async"
            alt=""
            (click)="openImageDialog()"
            class="file-field {{ className }}"
          />

          <img *ngIf="field" (click)="openImageDialogEdit()" [src]="field" alt="" class="file-field" />
        </div>

        <input
          id="file-input"
          #fileInput
          type="file"
          accept="images/*"
          (change)="fieldChange($event)"
          style="display: none"
        />

        <mat-form-field floatLabel="always" appearance="outline"  class="file-form-field" *ngIf="isShow">
          <input matInput readonly [formControlName]="controlName"/>
        </mat-form-field>

        <mat-form-field floatLabel="always" appearance="outline"  class="file-form-field" *ngIf="!isShow">
          <input
            matInput
            readonly
            [formControlName]="controlName"
            (click)="fileInput.click()"
          />
          <button
            type="button"
            color="primary"
            matSuffix
            mat-icon-button
            (click)="fileInput.click()"
          >
            <mat-icon>attach_file</mat-icon>
          </button>
          <mat-error *ngIf="fieldControl.hasError('required')">
            El archivo es <strong>requerido</strong>
          </mat-error>
        </mat-form-field>

      </div>
    </div>
  </ng-container>

  <ng-container *ngIf="!groupName">
    <div [formGroup]="form">

      <div style="display: flex;flex-direction: column;  align-items: flex-start;" >

        <mat-label class="custom-label">{{ title }}</mat-label>

        <div class="file-field-container">
          <img
            *ngIf="fieldFile"
            [src]="fieldFile | imageFileBase64 | async"
            alt=""
            (click)="openImageDialog()"
            class="file-field {{ className }}"
          />
          <img *ngIf="field" (click)="openImageDialogEdit()" [src]="field" alt="" class="file-field" />
        </div>
        <input
          id="file-input"
          #fileInput
          type="file"
          accept="images/*"
          (change)="fieldChange($event)"
          style="display: none"
        />
        <mat-form-field floatLabel="always" appearance="outline"  class="file-form-field" *ngIf="isShow">
          <input matInput readonly [formControlName]="controlName"/>
        </mat-form-field>
        <mat-form-field class="file-form-field" *ngIf="!isShow">
          <input
            matInput
            readonly
            [formControlName]="controlName"
            (click)="fileInput.click()"
          />
          <button
            type="button"
            color="primary"
            matSuffix
            mat-icon-button
            (click)="fileInput.click()"
          >
            <mat-icon>attach_file</mat-icon>
          </button>
          <mat-error *ngIf="fieldControl.hasError('required')">
            El archivo es <strong>requerido</strong>
          </mat-error>
        </mat-form-field>

      </div>
    </div>
  </ng-container>

  </ng-container>

